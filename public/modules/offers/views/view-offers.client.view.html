<!-- Accommodation -->
<div class="panel panel-default offer-view" data-ng-controller="ViewOffersController" data-ng-init="findOffer(profile.id)">
  <div class="panel-heading">
    Accommodation
    <!-- Button + dropdown for user's own profile -->
    <div ng-show="user._id === profile.id" class="pull-right btn-group" dropdown is-open="hostingDropdown">
      <button class="btn btn-sm dropdown-toggle btn-hosting btn-hosting-yes" ng-class="{'btn-hosting-yes': offer.status === 'yes', 'btn-hosting-maybe': offer.status === 'maybe', 'btn-hosting-no': (!offer || offer.status === 'no')}">
        {{ hostingStatusLabel() }}
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu">
        <li><a ng-click="hostingStatus('yes')" class="cursor-pointer hosting-yes">I can host</a></li>
        <li><a ng-click="hostingStatus('maybe')" class="cursor-pointer hosting-maybe">I might be able to host</a></li>
        <li><a ng-click="hostingStatus('no')" class="cursor-pointer hosting-no">I can't host currently</a></li>
      </ul>
    </div>
    <!-- Button for other profiles -->
    <a ng-show="user._id !== profile.id" ui-sref="listMessages({userId: profile.id})" class="btn btn-sm pull-right btn-hosting btn-hosting-yes" ng-show="offer.status === 'yes'" ng-class="{'btn-hosting-yes': offer.status === 'yes', 'btn-hosting-maybe': offer.status === 'maybe', 'btn-hosting-no': (!offer || offer.status === 'no')}">
      {{ hostingStatusLabel() }}
    </a>
  </div>
  <div class="panel-body">

    <div ng-show="offer.description && offer.status !== 'no'" ng-bind-html="offer.description | trustedHtml"></div>
    <small ng-show="offer.description && user._id === profile.id && offer.status !== 'no'" class="pull-right"><a ui-sref="offer" class="text-muted">edit</a></small>

    <!-- No hosting -->
    <div ng-show="!offer || offer.status === 'no'">

      <!-- User has written explanation -->
      <div ng-show="offer.noOfferDescription" ng-bind-html="offer.noOfferDescription | trustedHtml"></div>
      <small ng-show="offer.noOfferDescription && user._id === profile.id" class="pull-right"><a ng-click="hostingStatus('no')" class="cursor-pointer text-muted">edit</a></small>

      <!-- Default "sorry nope" -->
      <div ng-hide="offer.noOfferDescription" class="content-empty text-muted">
        <i class="fa fa-3x fa-home"></i>
        <h4>Sorry, user is not hosting currently.</h4>
        <p ng-show="!offer.noOfferDescription && user._id === profile.id"><a ng-click="hostingStatus('no')" class="cursor-pointer text-muted"><small>Customize</small></a></p>
      </div>

    </div>
    <!-- /No hosting -->

  </div>

  <!-- When looking at your own profile -->
  <div class="panel-footer text-center" ng-show="user._id === profile.id && (!offer || offer.status === 'no')">
    <a ui-sref="offer" class="btn btn-sm btn-primary">Start hosting travellers</a>
  </div>

  <!--  ng-click="showOfferLocation() markers="offer.marker"" -->
  <leaflet center="center" layers="layers" class="cursor-pointer offer-location" ng-show="offer && offer.status !== 'no'" id="offer-location-canvas"></leaflet>
</div>
<!-- /Accommodation -->
